# 6. Τελική Άσκηση {#Java} 
© Γιάννης Κωστάρας

---

[<](../6.7-Exercise/README.md) | [Δ](../../README.md)  

---

Αφού καταφέρατε να φθάσετε μέχρι εδώ, θα μπορέσετε να εφαρμόσετε όσα μάθατε στα προηγούμενα μαθήματα ώστε να εμπεδώσετε τις γνώσεις σας και να μπορέσετε να δημιουργήσετε κάτι μόνοι σας.

Το αφεντικό σας σας ζητάει να δημιουργήσετε μια εφαρμογή για να μπορεί να θυμάται τι εργασίες έχει να κάνει στο άμεσο μέλλον καθώς συνηθίζει να ξεχνάει. Σας δίνει λοιπόν τις ακόλουθες απαιτήσεις για την εφαρμογή _Todo_:

* Οι εργασίες/καθήκοντα (tasks) θα πρέπει να 'χουν προτεραιότητα (priority), ώστε οι χρήστες να μπορούν να επικεντρωθούν πρώτα σε καθήκοντα υψηλότερης προτεραιότητας.
* Τα καθήκοντα θα πρέπει να έχουν ημερομηνία λήξης, έτσι ώστε οι χρήστες να μπορούν να επικεντρωθούν σε καθήκοντα που είναι πιο κοντά στην προθεσμία τους.
* Θα πρέπει οι χρήστες να ενημερώνονται για καθυστερήσεις των καθηκόντων τους ή όταν πλησιάζει η προθεσμία τους
* Οι εργασίες μπορούν να επισημανθούν ως ολοκληρωμένες, αλλά αυτό δεν σημαίνει ότι πρέπει να διαγραφούν ή να αποκρυφούν.

Αφού κάνετε την ανάλυση των ανωτέρω απαιτήσεων, καταλήγετε στα σενάρια που φαίνονται στο διάγραμμα της εικόνας 1.

![](assets/Fig1.png)

**Εικόνα 1** _Διάγραμμα σεναρίων της εφαρμογής Todo_

Μετά από μερικές ακόμα συναντήσεις με το αφεντικό σας καταλήγετε στο ακόλουθο διάγραμμα κλάσεων το οποίο και καλείστε να υλοποιήσετε στη Java.

![](assets/Fig2.png)

**Εικόνα 2** _Διάγραμμα κλάσεων της εφαρμογής Todo_

Ως πρόγραμμα ανάπτυξης μπορείτε να χρησιμοποιήσετε το [NetBeans](http://apache.netbeans.org) όπως μάθαμε σ' αυτά τα μαθήματα, αλλά μπορείτε να χρησιμοποιήσετε οποιοδήποτε άλλο πρόγραμμα νοιώθετε άνετα.

## 1ο μέρος
Στο πρώτο μέρος του προγράμματος, θα πρέπει να μπορείτε να αποθηκεύσετε τα καθήκοντα στη μνήμη. Σας δίνονται οι παρακάτω κλάσεις:

* ```gr.cup.mathesis.Main``` που υλοποιεί τη διεπαφή με το χρήστη
* ```gr.cup.mathesis.model.TaskManagerInterface``` που είναι μια διεπαφή Java που υλοποιεί τις απαιτήσεις του χρήστη με βάση το διάγραμμα κλάσεων της εικόνας 2
* ```gr.cup.mathesis.model.TaskManager``` μια αρχική υλοποίηση του ```TaskManagerInterface``` που θα πρέπει να υλοποιήσετε. Η κλάση αυτή καλείται από την ```Main``` μέσω της στατικής μεθόδου ```getInstance()``` που επιτρέπει μόνο ένα αντικείμενο αυτής της κλάσης να δημιουργηθεί. Αυτό το pattern ονομάζεται _Singleton_.

Θα πρέπει επίσης να δημιουργήσετε και να υλοποιήσετε την κλάση ```gr.cup.mathesis.model.Task``` με βάση το διάγραμμα της εικόνας 2.

## 2ο μέρος
Όταν τελειώσετε την υλοποίηση και πάρετε το ΟΚ από το αφεντικό σας ότι δουλεύει όπως προβλέπεται, θα πρέπει να μπορείτε ν' αποθηκεύσετε τα καθήκοντα σε κάποια μόνιμη μονάδα αποθήκευσης. Στο 2ο μέρος της άσκησης η μονάδα μόνιμης αποθήκευσης είναι μια βάση δεδομένων η οποία αποθηκεύεται στη διαδρομή ```<user.home>/db/todo```. Όπως βλέπετε στην παρακάτω εικόνα, θα πρέπει να υλοποιήσετε την κλάση:

* ```gr.cup.mathesis.model.db.TaskManagerDB``` 

η οποία θα πρέπει να υλοποιήσει τη διεπαφή ```TaskManagerInterface``` όπως και η κλάση ```TaskManager``` με τη διαφορά ότι αυτή τη φορά τα ```Task```s θα πρέπει να αποθηκευθούν σε μια ΒΔ. Ως ΒΔ επιλέχθηκε η [HSQLDB](http://hsqldb.org/) για την οποία πρέπει να κατεβάσετε το κατάλληλο πρόγραμμα οδήγησης (driver) στο φάκελο ```lib```.

![](assets/Fig3.png)

**Εικόνα 3** _Διάγραμμα κλάσεων της εφαρμογής Todo_
 
Χάρις στη διεπαφή ```TaskManagerInterface```, χρειάζεται να αλλάξετε μόνο τη μεταβλητή ```TASK_MANAGER``` στην κλάση ```Main``` ώστε να δείχνει στην ```TaskManagerDB``` και το πρόγραμμα θα πρέπει να εκτελείται χωρίς άλλη αλλαγή. 

Σας παρέχετε το αρχείο ```db.properties``` το οποίο σας διαθέτει όλα τα ερωτήματα SQL καθώς και τις απαραίτητες ιδιότητες για να συνδεθείτε με τη ΒΔ. Θα πρέπει να το διαβάσετε στην κλάση ```TaskManagerDB``` για ν' ανακτήσετε τις τιμές των διαφόρων κλειδιών των ιδιοτήτων.

## 3ο μέρος
Το αφεντικό σας θέλει να μπορεί να αποθηκεύει τις εργασίες του και σε κάποια μορφή που να μπορεί να τις βλέπει εύκολα χωρίς να τρέχει το πρόγραμμα. Η κλάση 

* ```gr.cup.mathesis.model.xml.TaskManagerXML```

επιτρέπει να αποθηκεύετε τα ```Task```s σ' ένα αρχείο XML. 

Ένα παράδειγμα μορφής αρχείου XML φαίνεται παρακάτω:

```xml
<tasks>
	<task id="1">
		<description>description</description>
		<priority>10</priority>
		<dueDate>2019-01-01</dueDate>
		<alert>yes</alert>
		<daysBefore>1</daysBefore>
		<obs></obs>
		<completed>false</completed>
	</task>
	<task id="2">
		...
	</task>
	...
</tasks>
``` 
το οποίο ζητάει από το χρήστη τη διαδρομή του αρχείου που θ' αποθηκεύσει π.χ.```db/todo.xml```.

Θα σας δωθούν περαιτέρω οδηγίες πώς να παραδώσετε την άσκηση.

Καλή επιτυχία!

---

[<](../6.7-Exercise/README.md) | [Δ](../../README.md)   

---